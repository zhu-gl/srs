# use ffmpeg to ingest file/stream/device to SRS
# @see https://github.com/ossrs/srs/wiki/v1_CN_SampleIngest
# @see full.conf for detail config.

listen              1935;
max_connections     1000;
daemon              off;
srs_log_tank        console;

http_api {
    enabled         on;
    listen          8090;
}

vhost __defaultVhost__ {
    ingest livehk {
        enabled      on;
        input {
            type    stream;
            url     rtsp://[username]:[password]@[ip]:554/h264/ch[channel]/sub/av_stream;
        }
        ffmpeg      ./objs/ffmpeg;
        engine {
            output  rtmp://127.0.0.1:[port]/livehk/[channel];
        }
    }
	
	ingest videohk {
        enabled      on;
        input {
            type    file;
            url     rtsp://[username]:[password]@[ip]:554/h264/ch[channel]/sub/av_stream?starttime=[starttime]&endtime=[endtime];
        }
        ffmpeg      ./objs/ffmpeg;
        engine {
            output  rtmp://127.0.0.1:[port]/videohk/[channel];
        }
    }
}
